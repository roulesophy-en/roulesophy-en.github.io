---
filename: 2017-08-19-Jekyll-教學（四）：建立分頁.md
layout: post
title: Jekyll 教學（四）：建立分頁
tags: Programming
date: 2017-08-19
comments: true
---
{% raw  %}
[jekyll-now](https://github.com/barryclark/jekyll-now) 是十分方便，可是缺少了分頁的功能，在首頁裡會把所有的文章都展示出來，只要文章數量增加便會很麻煩。  
所以，這篇會為網誌增加分頁的功能。

本身 jekyll 有插件做到分頁功能，我們把這個插件放到 `_config.yml` 裡：

`_config.yml`
```
...
...

# Enable pagination and its path
paginate: 5
paginate_path: "/page/:num/"

...
...

# Use the following plug-ins
gems:
  - jekyll-sitemap # Create a sitemap using the official Jekyll sitemap gem
  - jekyll-feed # Create an Atom feed using the official Jekyll feed gem
  - jekyll-paginate

...
...

```

然後更改 `_includes/meta.html` ：  
`_includes/meta.html`
```
    <meta charset="utf-8" />
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0'>

    {% if page.excerpt %}
    <meta name="description" content="{{ page.excerpt| strip_html }}" />
    <meta property="og:description" content="{{ page.excerpt| strip_html }}" />
    {% else %}
    <meta name="description" content="{{ site.description }}{% if paginator.page > 1 %} - Page {{ paginator.page }}{% endif %}">
    <meta property="og:description" content="{{ site.description }}{% if paginator.page > 1 %} - Page {{ paginator.page }}{% endif %}" />
    {% endif %}
    <meta name="author" content="{{ site.name }}" />

    {% if page.title %}
    <meta property="og:title" content="{{ page.title }}{% if paginator.page > 1 %} - Page {{ paginator.page }}{% endif %}" />
    <meta property="twitter:title" content="{{ page.title }}{% if paginator.page > 1 %} - Page {{ paginator.page }}{% endif %}" />
    {% endif %}
```

然後更改 `_layouts/default.html` 的 `<title>` tag：

`_layouts/default.html`
```
<!DOCTYPE html>
<html>
  <head>
    <title>{% if page.title %}{{ page.title }} – {% endif %}{{ site.name }} – {{ site.description }}{% if paginator.page > 1 %} - Page {{ paginator.page }}{% endif %}</title>

    {% include meta.html %}
    {% seo %}

    <!--[if lt IE 9]>
      <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link rel="stylesheet" type="text/css" href="{{ site.baseurl }}/style.css" />
    <link rel="alternate" type="application/rss+xml" title="{{ site.name }} - {{ site.description }}" href="{{ site.baseurl }}/feed.xml" />

    <!-- Created with Jekyll Now - http://github.com/barryclark/jekyll-now -->
  </head>
...
...
```


然後修改 `index.html`：  
`index.html`
```
---
layout: default
---

<div class="posts">
  {% for post in paginator.posts %}
    <article class="post">

      <div style="margin: 15px 0 0 0;color: grey">{{ post.date | date_to_string }}</div>
      <h1 style="margin: 5px 0 15px;"><a href="{{ site.baseurl }}{{ post.url }}">{{ post.title }}</a></h1>
      
      <div class="entry">
        {{ post.excerpt }}
      </div>

      <a href="{{ site.baseurl }}{{ post.url }}" class="read-more">Read More...</a>
      
    </article>
  {% endfor %}
</div>

<!-- Pagination links -->
<div class="pagination">
  {% if paginator.previous_page %}
    <a href="{{ paginator.previous_page_path }}" class="previous">&laquo; Previous page</a>
  {% endif %}

  {% if paginator.next_page %}
    <a href="{{ paginator.next_page_path }}" class="next">Next page &raquo;</a>
  {% endif %}
</div>
```

最後在 `style.scss` 中加入分頁的 css：

`style.scss`
```
...
...
// Pagination
.pagination {
  margin-top: 2em;
  padding-top: 10px;
  border-top: 1px solid $lightGray;
  font-size: 14px;
}

.pagination .previous {
  float: left;
}

.pagination .next {
  float: right;
}
...
...
```

{% endraw %}
